<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CACTUS JACK - YÃ¶netim Paneli</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap"
      rel="stylesheet"
    />
    <link href="styles.css" rel="stylesheet" />
    <link href="styles_admin.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
      <div class="login-box">
        <h1>ğŸ”’ YÃ¶netim Paneli</h1>
        <p>LÃ¼tfen giriÅŸ yapÄ±n</p>
        <form id="loginForm" onsubmit="login(event)">
          <div class="form-group">
            <label for="password">Åifre</label>
            <input
              type="password"
              id="password"
              placeholder="Åifrenizi girin"
              required
            />
          </div>
          <button type="submit" class="login-btn">GiriÅŸ Yap</button>
          <div class="error-message" id="errorMessage">
            HatalÄ± ÅŸifre! LÃ¼tfen tekrar deneyin.
          </div>
        </form>
        <a href="/" class="back-link">â† MaÄŸazaya DÃ¶n</a>
      </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
      <div class="admin-header">
        <h1>CACTUS JACK - YÃ¶netim Paneli</h1>
        <button class="logout-btn" onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
      </div>

      <div class="admin-content">
        <div class="panel-section">
          <h2>Ä°statistikler</h2>
          <div class="stats-grid" id="statsGrid"></div>
        </div>

        <!-- Hero Section Settings -->
        <div class="panel-section">
          <div class="section-header">
            <h2>Ãœst BÃ¶lÃ¼m AyarlarÄ±</h2>
          </div>
          <div id="currentHeroBackground" style="margin-bottom: 20px; padding: 15px; background: var(--cream); border-radius: 8px;">
            <strong>Mevcut Arkaplan:</strong>
            <span id="heroBackgroundStatus">Gradyan (VarsayÄ±lan)</span>
          </div>
          <form class="modal-form" id="heroSettingsForm" onsubmit="saveHeroSettings(event)">
            <div class="form-group">
              <label for="heroBackground">Arkaplan Resmi veya Videosu</label>
              <input type="file" id="heroBackground" accept="image/*,video/*" onchange="previewHeroBackground(event)" />
              <small style="color: var(--text-muted); display: block; margin-top: 5px;">
                Resim veya video yÃ¼kleyebilirsiniz. Mevcut arkaplan silinecek ve yeni medya kullanÄ±lacak.
              </small>
            </div>
            <div id="heroBackgroundPreview" style="margin-top: 15px; text-align: center;">
              <!-- Preview will be shown here -->
            </div>
            <button type="submit" class="save-btn">ArkaplanÄ± Kaydet</button>
            <button type="button" class="save-btn" onclick="removeHeroBackground()" style="background: #d32f2f; margin-top: 10px;">
              ArkaplanÄ± KaldÄ±r (Gradyan Kullan)
            </button>
          </form>
        </div>

        <!-- Font Settings -->
        <div class="panel-section">
          <div class="section-header">
            <h2>Font AyarlarÄ±</h2>
          </div>
          <div id="currentFontStatus" style="margin-bottom: 20px; padding: 15px; background: var(--cream); border-radius: 8px;">
            <strong>Mevcut Font:</strong>
            <span id="fontStatus">VarsayÄ±lan</span>
          </div>
          <form class="modal-form" id="fontSettingsForm" onsubmit="saveFontSettings(event)">
            <div class="form-group">
              <label for="googleFontLink">Google Fonts Link</label>
              <input 
                type="url" 
                id="googleFontLink" 
                placeholder="https://fonts.googleapis.com/css2?family=..." 
                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
              />
              <small style="color: var(--text-muted); display: block; margin-top: 5px;">
                Google Fonts'tan aldÄ±ÄŸÄ±nÄ±z link'i buraya yapÄ±ÅŸtÄ±rÄ±n. Ã–rnek: https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap
              </small>
            </div>
            <div class="form-group">
              <label for="fontFamily">Font Ailesi AdÄ±</label>
              <input 
                type="text" 
                id="fontFamily" 
                placeholder="Roboto, sans-serif" 
                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
              />
              <small style="color: var(--text-muted); display: block; margin-top: 5px;">
                Font ailesinin CSS adÄ±nÄ± girin. Ã–rnek: 'Roboto', 'Open Sans', 'Montserrat'
              </small>
            </div>
            <button type="submit" class="save-btn">Fontu Kaydet</button>
            <button type="button" class="save-btn" onclick="removeCustomFont()" style="background: #d32f2f; margin-top: 10px;">
              VarsayÄ±lan Fonta DÃ¶n
            </button>
          </form>
        </div>

        <!-- Products Management -->
        <div class="panel-section">
          <div class="section-header">
            <h2>ÃœrÃ¼n YÃ¶netimi</h2>
            <button class="add-product-btn" onclick="openAddProductModal()">
              + Yeni ÃœrÃ¼n Ekle
            </button>
          </div>
          <table class="products-table">
            <thead>
              <tr>
                <th>Resim</th>
                <th>ÃœrÃ¼n AdÄ±</th>
                <th>AÃ§Ä±klama</th>
                <th>Fiyat</th>
                <th>Stok</th>
                <th>Ä°ÅŸlemler</th>
              </tr>
            </thead>
            <tbody id="productsTableBody">
              <!-- Products will be loaded here -->
            </tbody>
          </table>
        </div>
        <div class="comment-section">
          <h2>Yorum YÃ¶netimi</h2>
          <button class="add-comment-btn" onclick="openAddCommentModal()">
            + Yeni Yorum Ekle
          </button>
          <table class="comments-table">
            <thead>
              <tr>
                <th>KullanÄ±cÄ±</th>
                <th>Yorum</th>
                <th>YÄ±ldÄ±z</th>
                <th>Tarih</th>
                <th>Ä°ÅŸlemler</th>
              </tr>
            </thead>
            <tbody id="commentsTableBody">
              <!-- Comments will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Comment Modal -->
    <div class="modal" id="commentModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="commentModalTitle">Yeni Yorum Ekle</h2>
          <button class="close-modal" onclick="closeCommentModal()">Ã—</button>
        </div>
        <form class="modal-form" id="commentForm" onsubmit="saveComment(event)">
          <div class="form-group">
            <label for="cmt-author">KullanÄ±cÄ± AdÄ±</label>
            <input type="text" id="cmt-author" required />
          </div>
          <div class="form-group">
            <label for="cmt-body">Yorum</label>
            <textarea id="cmt-body" required></textarea>
          </div>
          <div class="form-group">
            <label for="cmt-stars">YÄ±ldÄ±z (1-5)</label>
            <input
              class="cmt-stars"
              type="number"
              id="cmt-stars"
              min="1"
              max="5"
              value="5"
              required
            />
          </div>
          <button type="submit" class="save-btn">Kaydet</button>
        </form>
      </div>
    </div>

    <!-- Product Modal -->
    <div class="modal" id="productModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Yeni ÃœrÃ¼n Ekle</h2>
          <button class="close-modal" onclick="closeModal()">Ã—</button>
        </div>
        <form class="modal-form" id="productForm" onsubmit="saveProduct(event)">
          <div class="form-group">
            <label for="productName">ÃœrÃ¼n AdÄ±</label>
            <input type="text" id="productName" required />
          </div>
          <div class="form-group">
            <label for="productDescription">AÃ§Ä±klama</label>
            <textarea id="productDescription" required></textarea>
          </div>
          <div class="form-group">
            <label for="productPrice">Fiyat (â‚º)</label>
            <input type="number" id="productPrice" step="0.01" required />
          </div>
          <div class="form-group">
            <label for="productStock">Stok Adedi</label>
            <input type="number" id="productStock" required />
          </div>
          
          <!-- Multiple Media Upload Section -->
          <div class="form-group">
            <label>Medya Galerisi (Resim veya Video)</label>
            <div style="margin-bottom: 15px;">
              <input
                type="file"
                id="productMediaFiles"
                accept="image/*,video/*"
                multiple
                style="margin-bottom: 10px"
              />
              <small style="display: block; color: #666;">
                ğŸ“· Birden fazla resim/video seÃ§ebilirsiniz<br />
                ğŸ“¹ Ä°lk medya ana gÃ¶rsel olarak kullanÄ±lacak<br />
                ğŸ”„ SÃ¼rÃ¼kle-bÄ±rak ile sÄ±ralama yapabilirsiniz
              </small>
            </div>
            
            <!-- Media Gallery Preview -->
            <div id="mediaGalleryPreview" style="display: none; margin-top: 15px;">
              <strong style="display: block; margin-bottom: 10px;">YÃ¼klÃ¼ Medyalar:</strong>
              <div id="mediaGalleryGrid" style="
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 10px;
              "></div>
            </div>
            
            <!-- Legacy single file upload (hidden, for backward compatibility) -->
            <input type="hidden" id="productImage" />
          </div>

          <div id="uploadProgress" style="display: none; margin: 10px 0">
            <div
              style="
                background: #e0e0e0;
                border-radius: 8px;
                height: 20px;
                overflow: hidden;
              "
            >
              <div
                id="progressBar"
                style="
                  background: #4caf50;
                  height: 100%;
                  width: 0%;
                  transition: width 0.3s;
                "
              ></div>
            </div>
            <small
              id="progressText"
              style="
                display: block;
                text-align: center;
                margin-top: 5px;
                color: #666;
              "
            >
              YÃ¼kleniyor...
            </small>
          </div>
          <button type="submit" class="save-btn">Kaydet</button>
        </form>
      </div>

    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Supabase Config -->
    <script src="supabase-config.js"></script>
    <!-- Storage Helper -->
    <script src="storage-helper.js"></script>
    <!-- Admin JS -->
    <script src="admin.js"></script>
  </body>
</html>
